!function(u,e,o){e.wp=e.wp||{},e.wp.dev4press=e.wp.dev4press||{},e.wp.dev4press.debugpress={popup:null,layout:{layout:"center",modal:"show",open:"manual",ratio:"normal",tab:"debugpress-debugger-tab-basics"},ajax:!1,admin:!1,tab:"",status:{sql_sort:"order",sql_order:"asc"},counts:{total:0,errors:0,doingitwrong:0,deprecated:0},sort_by:function(t,e,s,r){var a,o,p=[],l=[],d=[];for(a in u(t+" div."+r).each(function(){o=u(this).attr(e),p[o]=this,d.push(o)}),"asc"===s?d.sort(function(e,s){return e-s}):d.sort(function(e,s){return s-e}),d)l.push(p[d[a]]);u(t).empty(),u.each(l,function(e,s){u(t).append(s)})},init:function(e,s,t){wp.dev4press.debugpress.counts=e,wp.dev4press.debugpress.ajax=s,wp.dev4press.debugpress.admin=t,wp.dev4press.debugpress.popup=u("#debugpress-debugger-content-wrapper"),0<wp.dev4press.debugpress.counts.total&&(e=u(".debugpress-debug-dialog-button"),s=0<wp.dev4press.debugpress.counts.errors?"debugpress-debug-has-errors":"debugpress-debug-has-warnings",u(".debugpress-debug-has-errors",e).show().html(wp.dev4press.debugpress.counts.total),e.addClass(s)),wp.dev4press.debugpress.popup.smartAniPopup({settings:{style:"debugpress-style-popup",modal:!0,effect:"fade",closeEscape:!0,onLoad:!1,width:"95%",height:"90%",headerContent:u("#debugpress-debugger-content-header"),footerContent:u("#debugpress-debugger-content-footer"),buttonXContent:'<i aria-hidden="true" class="debugpress-icon debugpress-icon-power-off"></i>',cookiePosizeCode:"debugpress-settings-"+(wp.dev4press.debugpress.admin?"admin":"frontend"),xContentSize:!0,save:{layout:"center",modal:"show",open:"manual",ratio:"normal",tab:"debugpress-debugger-tab-basics"}},callbacks:{prepared:function(){wp.dev4press.debugpress.layout=this.save,wp.dev4press.debugpress.tab_change(this.save.tab)},afterOpen:function(){u("#debugpress-debugger-tabs .debugpress-tab-active a").trigger("focus")}}}),u(o).on("click",".debugpress-debug-dialog-button a",function(e){e.preventDefault(),wp.dev4press.debugpress.popup.smartAniPopup("open")}),u(o).on("change","#debugpress-debugger-select",function(){wp.dev4press.debugpress.tab_change(u(this).val())}),u(o).on("click",".debugpress-querie-sidebar-control span",function(e){e.preventDefault();e=u(".debugpress-tab-content.debugpress-tab-active");"open"===u(this).data("state")?(e.addClass("debugpress-queries-sidebar-closed"),u(this).data("state","closed"),u("i",this).removeClass("debugpress-icon-caret-left").addClass("debugpress-icon-caret-right")):(e.removeClass("debugpress-queries-sidebar-closed"),u(this).data("state","open"),u("i",this).addClass("debugpress-icon-caret-left").removeClass("debugpress-icon-caret-right"))}),u(o).on("click",".debugpress-debugger-panel-block-title span",function(e){e.preventDefault();e=u(this).parent().next();u(this).hasClass("block-open")?(u(this).removeClass("block-open"),u(this).find("i").attr("class","debugpress-icon debugpress-icon-square-plus"),e.hide()):(u(this).addClass("block-open"),u(this).find("i").attr("class","debugpress-icon debugpress-icon-square-minus"),e.show())}),u(o).on("click","#debugpress-debugger-content-wrapper .debugpress-events-log-toggle",function(e){e.preventDefault(),u(this).hasClass("debugpress-events-log-toggle-opened")?(u(this).html(debugpress_data.events_show_details),u(this).removeClass("debugpress-events-log-toggle-opened"),u(this).next().removeClass("debugpress-events-log-toggler-opened")):(u(this).html(debugpress_data.events_hide_details),u(this).addClass("debugpress-events-log-toggle-opened"),u(this).next().addClass("debugpress-events-log-toggler-opened"))}),u(o).on("keydown",'#debugpress-debugger-tabs [role="tab"]',function(e){var s,t=u(this),r=u(this).parents("li").prev().children('[role="tab"]'),a=u(this).parents("li").next().children('[role="tab"]');switch(e.keyCode){case 37:s=r;break;case 39:s=a;break;default:s=!1}s.length&&(t.attr({tabindex:"-1","aria-selected":null}),s.attr({tabindex:"0","aria-selected":!0}).trigger("focus"),e=u(o.activeElement).attr("href").substring(1),u('#debugpress-debugger-content-wrapper [role="tabpanel"]').attr("aria-hidden","true"),u("#debugpress-debugger-content-wrapper #"+e).attr("aria-hidden",null),wp.dev4press.debugpress.tab_change(e))}),u(o).on("click",".debugpress_r a.debugpress_r_c",function(e){var s;e.preventDefault(),u(this).hasClass("debugpress_r_aa")&&(e=u(this).find(".debugpress_r_a"),(s=u("#"+u(this).data("branch")))&&(s.hasClass("debugpress_r_open")?e.html(debugpress_data.icon_right):e.html(debugpress_data.icon_down),s.toggleClass("debugpress_r_open")))}),u(o).on("click","#debugpress-debugger-tabs li a",function(e){e.preventDefault(),wp.dev4press.debugpress.tab_change(u(this).attr("href").substring(1))}),wp.dev4press.debugpress.ajax&&wp.dev4press.debugpress.tabs.ajax.init(),wp.dev4press.debugpress.tabs.debuglog.init(),wp.dev4press.debugpress.tabs.queries.init(),wp.dev4press.debugpress.tabs.hooks.init()},tabs:{debuglog:{init:function(){u(o).on("click","button.debugpress-action-debuglog-load",function(){u.ajax({url:debugpress_data.ajax_endpoint+"?action=debugpress_load_debuglog&_ajax_nonce="+debugpress_data.call_nonce,type:"get",dataType:"html",success:function(e){var s=u("#debugpress-debuglog-content").find("div");s.html(e),wp.dev4press.debugpress.tabs.debuglog.resize(),s.scrollTop(s.prop("scrollHeight"))},error:function(e,s,t){}})}),u(e).on("resize orientationchange",wp.dev4press.debugpress.tabs.debuglog.resize)},resize:function(){u("#debugpress-debuglog-content div").height(u(".debugpress-style-popup .sanp-content").height()-65)}},ajax:{init:function(){u(o).ajaxError(function(e,s,t,r){r={status:"error",error:r,url:t.url,type:t.type,headers:wp.dev4press.debugpress.tabs.ajax.headers(s)};wp.dev4press.debugpress.tabs.ajax.render(r)}),u(o).ajaxSuccess(function(e,s,t){t={status:"success",url:t.url,data:t.data?t.data.toString():"",type:t.type,response:t.hasOwnProperty("dataType")?t.dataType:t.dataTypes.join("/"),headers:wp.dev4press.debugpress.tabs.ajax.headers(s)};wp.dev4press.debugpress.tabs.ajax.render(t)})},render:function(e){var s=u("#debugpress-debugger-ajax-wrapper"),t=u("#debugpress-debugger-tab-ajax-li"),r=u(".debugpress-debug-dialog-button"),a=parseInt(s.data("calls")),o="",p="UNKNOWN";0===a&&s.html(""),s.data("calls",++a),u("a span",t).html(a),o="success"===e.status?(e.hasOwnProperty("response")&&(p=void 0===e.response?p:e.response.toString().toUpperCase()),'<h5 class="debugpress-debugger-panel-block-title">[SUCCESS] ['+e.type+" => "+p+"] "+e.url+'<span class="block-open"><i class="debugpress-icon debugpress-icon-square-minus"></i></span></h5>'):'<h5 class="debugpress-debugger-panel-block-title" style="background: #900;">[ERROR] ['+e.type+" => "+e.error+"] "+e.url+'<span class="block-open"><i class="debugpress-icon debugpress-icon-square-minus"></i></span></h5>',o+='<div class="debugpress-debugger-panel-block" style="display: block;"><table class="debugpress-debugger-table"><thead><tr><th scope="col" class="" style="">Name</th><th scope="col" class="" style="">Value</th></tr></thead><tbody>',u.each(e.headers,function(e,s){o+="<tr><td>"+e+"</td><td>"+s+"</td></tr>"}),o+="</tbody></table></div>",s.append(o),u(".debugpress-debug-has-ajax",r).show().html(a),r.fadeOut(50).fadeIn(50).fadeOut(100).fadeIn(100).fadeOut(50).fadeIn(50)},headers:function(e){var e=e.getAllResponseHeaders().trim().split(/[\r\n]+/),r={};return u.each(e,function(e,s){var s=s.split(": "),t=s.shift(),s=s.join(": ");"x-debugpress-"===t.substring(0,13).toLowerCase()&&(t=t.substring(13),r[t]=s)}),r}},hooks:{filters:{all:{types:[]},active:{show:"all",types:[]}},init:function(){this.prepare(),this.events()},prepare:function(){u("#debugpress-debugger-tab-hooks .sqlq-option-type").each(function(){var e=u(this).data("type");wp.dev4press.debugpress.tabs.hooks.filters.active.types.push(e),wp.dev4press.debugpress.tabs.hooks.filters.all.types.push(e)})},filter:function(){for(var e,s=0;s<wp.dev4press.debugpress.tabs.hooks.filters.all.types.length;s++)e="dbg-hook-"+wp.dev4press.debugpress.tabs.hooks.filters.all.types[s].replace("::","--"),u("table.dbg-hooks-actions ."+e).hide(),u("table#dbg-hooks-list > tbody > tr."+e).hide();for(s=0;s<wp.dev4press.debugpress.tabs.hooks.filters.active.types.length;s++)e="dbg-hook-"+wp.dev4press.debugpress.tabs.hooks.filters.active.types[s].replace("::","--"),u("table.dbg-hooks-actions ."+e).show(),u("table#dbg-hooks-list > tbody > tr."+e).show()},events:function(){u(o).on("click","#debugpress-debugger-tab-hooks .sqlq-option-callbacks",function(e){var s;e.preventDefault(),u(this).hasClass("sqlq-option-off")&&(e=u(this).attr("id").substring(9),s=u(".dbg-hooks-actions .dbg-hook-column-action"),"full"===e?s.addClass("dbg-calls-show"):s.removeClass("dbg-calls-show"),u("#debugpress-debugger-tab-hooks .sqlq-option-callbacks").addClass("sqlq-option-off").removeClass("sqlq-option-on"),u(this).removeClass("sqlq-option-off").addClass("sqlq-option-on"))}),u(o).on("click","#debugpress-debugger-tab-hooks .sqlq-option-type",function(e){e.preventDefault();var s=u(this).data("type");u(this).hasClass("sqlq-option-off")?(wp.dev4press.debugpress.tabs.hooks.filters.active.types.push(s),u(this).addClass("sqlq-option-on").removeClass("sqlq-option-off")):(wp.dev4press.debugpress.tabs.hooks.filters.active.types=wp.dev4press.debugpress.tabs.hooks.filters.active.types.filter(function(e){return e!==s}),u(this).addClass("sqlq-option-off").removeClass("sqlq-option-on")),wp.dev4press.debugpress.tabs.hooks.filter()}),u(o).on("click","#debugpress-debugger-tab-hooks .sqlq-types-reset",function(e){e.preventDefault(),"hide"===u(this).attr("id").substring(10)?(wp.dev4press.debugpress.tabs.hooks.filters.active.types=[],u("#debugpress-debugger-tab-hooks .sqlq-option-type").addClass("sqlq-option-off").removeClass("sqlq-option-on")):(wp.dev4press.debugpress.tabs.hooks.filters.active.types=wp.dev4press.debugpress.tabs.hooks.filters.all.types,u("#debugpress-debugger-tab-hooks .sqlq-option-type").addClass("sqlq-option-on").removeClass("sqlq-option-off")),u("#debugpress-debugger-tab-hooks .sqlq-types-reset").addClass("sqlq-option-off").removeClass("sqlq-option-on"),u(this).removeClass("sqlq-option-off").addClass("sqlq-option-on"),wp.dev4press.debugpress.tabs.hooks.filter()}),u(o).on("click","#debugpress-debugger-tab-hooks .dbg-callback-button-expander",function(){var e=u(this).parent();u(this).next();e.hasClass("dbg-calls-show")?e.removeClass("dbg-calls-show"):e.addClass("dbg-calls-show")})}},queries:{filters:{total:{queries:0,total:0},all:{caller:[],types:[],tables:[]},active:{show:"all",caller:[],types:[],tables:[]}},init:function(){this.prepare(),this.events()},prepare:function(){var e=u("#debugpress-debugger-tab-queries .sqlq-option-caller"),s=u("#debugpress-debugger-tab-queries .sqlq-option-type"),t=u("#debugpress-debugger-tab-queries .sqlq-option-table");wp.dev4press.debugpress.tabs.queries.filters.total.queries=parseInt(u("#sqlq-stats-filter-queries").html()),wp.dev4press.debugpress.tabs.queries.filters.total.total=parseFloat(u("#sqlq-stats-filter-total").html()),e.each(function(){var e=parseInt(u(this).data("caller"));wp.dev4press.debugpress.tabs.queries.filters.active.caller.push(e),wp.dev4press.debugpress.tabs.queries.filters.all.caller.push(e)}),s.each(function(){var e=u(this).data("type");wp.dev4press.debugpress.tabs.queries.filters.active.types.push(e),wp.dev4press.debugpress.tabs.queries.filters.all.types.push(e)}),t.each(function(){var e=parseInt(u(this).data("table"));wp.dev4press.debugpress.tabs.queries.filters.active.tables.push(e),wp.dev4press.debugpress.tabs.queries.filters.all.tables.push(e)})},filter:function(){var e=u(".sql-query-list > .sql-query"),i={queries:0,total:0,min:!1,max:!1,avg:0},s={queries:0,total:0};e.each(function(){var e,s,t=u(this).data("caller"),r=(u(this).data("tables")+"").split(","),a=u(this).data("type"),o=u(this).data("speed"),p=parseFloat(u(this).data("time")),l=wp.dev4press.debugpress.tabs.queries.filters.active,d=!0;if(d=(d=(d="all"!==l.show&&l.show!==o?!1:d)&&-1===l.caller.indexOf(t)?!1:d)&&-1===l.types.indexOf(a)?!1:d){for(e=s=0;e<r.length;e++)-1<l.tables.indexOf(parseInt(r[e]))&&s++;0===s&&(d=!1)}d?(!1===i.min&&(i.min=p),!1===i.max&&(i.max=p),i.queries++,i.total+=p,i.min>p&&(i.min=p),i.max<p&&(i.max=p),u(this).show()):u(this).hide()}),0<i.queries?(i.avg=i.total/i.queries,s.queries=(i.queries/wp.dev4press.debugpress.tabs.queries.filters.total.queries*100).toFixed(0),s.total=(i.total/wp.dev4press.debugpress.tabs.queries.filters.total.total*100).toFixed(0)):(i.min=0,i.max=0),u.each(i,function(e,s){"queries"!==e&&(s=parseFloat(s).toFixed(6)),u("#sqlq-stats-filter-"+e).html(s)}),u.each(s,function(e,s){u("#sqlq-stats-ratio-"+e).html(s+"%")})},events:function(){u(o).on("click","#debugpress-debugger-tab-queries .sqlq-option-calls",function(e){var s;e.preventDefault(),u(this).hasClass("sqlq-option-off")&&(s="full"===(e=u(this).attr("id").substring(9))?"compact":"full",u(".sql-calls-"+e).show(),u(".sql-calls-"+s).hide(),u("#debugpress-debugger-tab-queries .sqlq-option-calls").addClass("sqlq-option-off").removeClass("sqlq-option-on"),u(this).removeClass("sqlq-option-off").addClass("sqlq-option-on"))}),u(o).on("click","#debugpress-debugger-tab-queries .sqlq-option-sort",function(e){e.preventDefault(),u(this).hasClass("sqlq-option-off")?(wp.dev4press.debugpress.status.sql_sort=u(this).attr("id").substring(9),wp.dev4press.debugpress.sort_by(".sql-query-list","data-"+wp.dev4press.debugpress.status.sql_sort,wp.dev4press.debugpress.status.sql_order,"sql-query"),u("#debugpress-debugger-tab-queries .sqlq-option-sort").addClass("sqlq-option-off").removeClass("sqlq-option-on"),u(this).removeClass("sqlq-option-off").addClass("sqlq-option-on")):(wp.dev4press.debugpress.status.sql_order="asc"===wp.dev4press.debugpress.status.sql_order?"desc":"asc",wp.dev4press.debugpress.sort_by(".sql-query-list","data-"+wp.dev4press.debugpress.status.sql_sort,wp.dev4press.debugpress.status.sql_order,"sql-query"))}),u(o).on("click","#debugpress-debugger-tab-queries .sqlq-option-show",function(e){e.preventDefault(),u(this).hasClass("sqlq-option-off")&&(wp.dev4press.debugpress.tabs.queries.filters.active.show=u(this).data("show"),u("#debugpress-debugger-tab-queries .sqlq-option-show").addClass("sqlq-option-off").removeClass("sqlq-option-on"),u(this).removeClass("sqlq-option-off").addClass("sqlq-option-on"),wp.dev4press.debugpress.tabs.queries.filter())}),u(o).on("click","#debugpress-debugger-tab-queries .sqlq-option-reset",function(e){e.preventDefault(),"hide"===u(this).attr("id").substring(10)?(wp.dev4press.debugpress.tabs.queries.filters.active.tables=[],u("#debugpress-debugger-tab-queries .sqlq-option-table").addClass("sqlq-option-off").removeClass("sqlq-option-on")):(wp.dev4press.debugpress.tabs.queries.filters.active.tables=wp.dev4press.debugpress.tabs.queries.filters.all.tables,u("#debugpress-debugger-tab-queries .sqlq-option-table").addClass("sqlq-option-on").removeClass("sqlq-option-off")),u("#debugpress-debugger-tab-queries .sqlq-option-reset").addClass("sqlq-option-off").removeClass("sqlq-option-on"),u(this).removeClass("sqlq-option-off").addClass("sqlq-option-on"),wp.dev4press.debugpress.tabs.queries.filter()}),u(o).on("click","#debugpress-debugger-tab-queries .sqlq-option-table",function(e){e.preventDefault();var s=u(this).data("table");u(this).hasClass("sqlq-option-off")?(wp.dev4press.debugpress.tabs.queries.filters.active.tables.push(s),u(this).addClass("sqlq-option-on").removeClass("sqlq-option-off")):(wp.dev4press.debugpress.tabs.queries.filters.active.tables=wp.dev4press.debugpress.tabs.queries.filters.active.tables.filter(function(e){return e!==s}),u(this).addClass("sqlq-option-off").removeClass("sqlq-option-on")),wp.dev4press.debugpress.tabs.queries.filter()}),u(o).on("click","#debugpress-debugger-tab-queries .sqlq-option-caller",function(e){e.preventDefault();var s=u(this).data("caller");u(this).hasClass("sqlq-option-off")?(wp.dev4press.debugpress.tabs.queries.filters.active.caller.push(s),u(this).addClass("sqlq-option-on").removeClass("sqlq-option-off")):(wp.dev4press.debugpress.tabs.queries.filters.active.caller=wp.dev4press.debugpress.tabs.queries.filters.active.caller.filter(function(e){return e!==s}),u(this).addClass("sqlq-option-off").removeClass("sqlq-option-on")),wp.dev4press.debugpress.tabs.queries.filter()}),u(o).on("click","#debugpress-debugger-tab-queries .sqlq-caller-reset",function(e){e.preventDefault(),"hide"===u(this).attr("id").substring(11)?(wp.dev4press.debugpress.tabs.queries.filters.active.caller=[],u("#debugpress-debugger-tab-queries .sqlq-option-caller").addClass("sqlq-option-off").removeClass("sqlq-option-on")):(wp.dev4press.debugpress.tabs.queries.filters.active.caller=wp.dev4press.debugpress.tabs.queries.filters.all.caller,u("#debugpress-debugger-tab-queries .sqlq-option-caller").addClass("sqlq-option-on").removeClass("sqlq-option-off")),u("#debugpress-debugger-tab-queries .sqlq-caller-reset").addClass("sqlq-option-off").removeClass("sqlq-option-on"),u(this).removeClass("sqlq-option-off").addClass("sqlq-option-on"),wp.dev4press.debugpress.tabs.queries.filter()}),u(o).on("click","#debugpress-debugger-tab-queries .sqlq-option-type",function(e){e.preventDefault();var s=u(this).data("type");u(this).hasClass("sqlq-option-off")?(wp.dev4press.debugpress.tabs.queries.filters.active.types.push(s),u(this).addClass("sqlq-option-on").removeClass("sqlq-option-off")):(wp.dev4press.debugpress.tabs.queries.filters.active.types=wp.dev4press.debugpress.tabs.queries.filters.active.types.filter(function(e){return e!==s}),u(this).addClass("sqlq-option-off").removeClass("sqlq-option-on")),wp.dev4press.debugpress.tabs.queries.filter()}),u(o).on("click","#debugpress-debugger-tab-queries .sqlq-types-reset",function(e){e.preventDefault(),"hide"===u(this).attr("id").substring(10)?(wp.dev4press.debugpress.tabs.queries.filters.active.types=[],u("#debugpress-debugger-tab-queries .sqlq-option-type").addClass("sqlq-option-off").removeClass("sqlq-option-on")):(wp.dev4press.debugpress.tabs.queries.filters.active.types=wp.dev4press.debugpress.tabs.queries.filters.all.types,u("#debugpress-debugger-tab-queries .sqlq-option-type").addClass("sqlq-option-on").removeClass("sqlq-option-off")),u("#debugpress-debugger-tab-queries .sqlq-types-reset").addClass("sqlq-option-off").removeClass("sqlq-option-on"),u(this).removeClass("sqlq-option-off").addClass("sqlq-option-on"),wp.dev4press.debugpress.tabs.queries.filter()}),u(o).on("click","#debugpress-debugger-tab-queries .sql-calls-button-expander",function(){var e=u(this).parent(),s=e.parent();e.hasClass("sql-calls-full")?(e.hide(),u(".sql-calls-compact",s).show()):(e.hide(),u(".sql-calls-full",s).show())})}}},save_popup_state:function(){wp.dev4press.debugpress.popup.smartAniPopup("mod",{save:wp.dev4press.debugpress.layout}),wp.dev4press.debugpress.popup.smartAniPopup("save")},tab_change:function(e){e!==wp.dev4press.debugpress.tab&&(wp.dev4press.debugpress.tab=e,wp.dev4press.debugpress.layout.tab=e,u("#debugpress-debugger-tabs li").removeClass("debugpress-tab-active"),u("#"+e+"-li").addClass("debugpress-tab-active"),u("#debugpress-debugger-content-wrapper div.debugpress-tab-content").removeClass("debugpress-tab-active"),u("#"+e).addClass("debugpress-tab-active"),u("#debugpress-debugger-tabs li a").attr({tabindex:"-1","aria-selected":null}),u("#"+e+"-li a").attr({tabindex:"0","aria-selected":!0}),u("#debugpress-debugger-select").val(e),wp.dev4press.debugpress.save_popup_state())}}}(jQuery,window,document);