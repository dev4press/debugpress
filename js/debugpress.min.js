!function(n,e,o){e.wp=e.wp||{},e.wp.dev4press=e.wp.dev4press||{},e.wp.dev4press.debugpress={ajax:!1,tab:"",status:{sql_sort:"order",sql_order:"asc"},counts:{total:0,errors:0,doingitwrong:0,deprecated:0},sort_by:function(t,e,s,r){var a,o,p=[],l=[],i=[];for(a in n(t+" div."+r).each(function(){o=n(this).attr(e),p[o]=this,i.push(o)}),"asc"===s?i.sort(function(e,s){return e-s}):i.sort(function(e,s){return s-e}),i)l.push(p[i[a]]);n(t).empty(),n.each(l,function(e,s){n(t).append(s)})},init:function(e,s){wp.dev4press.debugpress.counts=e,wp.dev4press.debugpress.ajax=s,0<wp.dev4press.debugpress.counts.total&&(e=n(".debugpress-debug-dialog-button"),s=0<wp.dev4press.debugpress.counts.errors?"debugpress-debug-has-errors":"debugpress-debug-has-warnings",n(".debugpress-debug-has-errors",e).show().html(wp.dev4press.debugpress.counts.total),e.addClass(s)),n("#debugpress-debugger-content-wrapper").smartAniPopup({settings:{style:"debugpress-style-popup",modal:!0,effect:"fade",closeEscape:!0,onLoad:!1,width:"95%",height:"90%",headerContent:n("#debugpress-debugger-content-header"),footerContent:n("#debugpress-debugger-content-footer"),buttonXContent:'<i aria-hidden="true" class="debugpress-icon debugpress-icon-power-off"></i>',xContentSize:!0},callbacks:{afterOpen:function(){n("#debugpress-debugger-tabs .debugpress-tab-active a").trigger("focus")}}}),n(o).on("click",".debugpress-debug-dialog-button a",function(e){e.preventDefault(),n("#debugpress-debugger-content-wrapper").smartAniPopup("open")}),n(o).on("change","#debugpress-debugger-select",function(){wp.dev4press.debugpress.tab_change(n(this).val())}),n(o).on("click",".debugpress-querie-sidebar-control span",function(e){e.preventDefault();e=n(".debugpress-tab-content.debugpress-tab-active");"open"===n(this).data("state")?(e.addClass("debugpress-queries-sidebar-closed"),n(this).data("state","closed"),n("i",this).removeClass("debugpress-icon-flip-horizontal")):(e.removeClass("debugpress-queries-sidebar-closed"),n(this).data("state","open"),n("i",this).addClass("debugpress-icon-flip-horizontal"))}),n(o).on("click",".debugpress-debugger-panel-block-title span",function(e){e.preventDefault();e=n(this).parent().next();n(this).hasClass("block-open")?(n(this).removeClass("block-open"),n(this).find("i").attr("class","debugpress-icon debugpress-icon-plus"),e.hide()):(n(this).addClass("block-open"),n(this).find("i").attr("class","debugpress-icon debugpress-icon-minus"),e.show())}),n(o).on("click","#debugpress-debugger-content-wrapper .debugpress-events-log-toggle",function(e){e.preventDefault(),n(this).hasClass("debugpress-events-log-toggle-opened")?(n(this).html(debugpress_data.events_show_details),n(this).removeClass("debugpress-events-log-toggle-opened"),n(this).next().removeClass("debugpress-events-log-toggler-opened")):(n(this).html(debugpress_data.events_hide_details),n(this).addClass("debugpress-events-log-toggle-opened"),n(this).next().addClass("debugpress-events-log-toggler-opened"))}),n(o).on("keydown",'#debugpress-debugger-tabs [role="tab"]',function(e){var s,t=n(this),r=n(this).parents("li").prev().children('[role="tab"]'),a=n(this).parents("li").next().children('[role="tab"]');switch(e.keyCode){case 37:s=r;break;case 39:s=a;break;default:s=!1}s.length&&(t.attr({tabindex:"-1","aria-selected":null}),s.attr({tabindex:"0","aria-selected":!0}).trigger("focus"),e=n(o.activeElement).attr("href").substring(1),n('#debugpress-debugger-content-wrapper [role="tabpanel"]').attr("aria-hidden","true"),n("#debugpress-debugger-content-wrapper #"+e).attr("aria-hidden",null),wp.dev4press.debugpress.tab_change(e))}),n(o).on("click",".debugpress_r a.debugpress_r_c",function(e){var s;e.preventDefault(),n(this).hasClass("debugpress_r_aa")&&(e=n(this).find(".debugpress_r_a"),(s=n("#"+n(this).data("branch")))&&(s.hasClass("debugpress_r_open")?e.html(debugpress_data.icon_right):e.html(debugpress_data.icon_down),s.toggleClass("debugpress_r_open")))}),n(o).on("click","#debugpress-debugger-tabs li a",function(e){e.preventDefault(),wp.dev4press.debugpress.tab_change(n(this).attr("href").substr(1))}),wp.dev4press.debugpress.ajax&&wp.dev4press.debugpress.tabs.ajax.init(),wp.dev4press.debugpress.tabs.debuglog.init(),wp.dev4press.debugpress.tabs.queries.init(),wp.dev4press.debugpress.tabs.hooks.init()},tabs:{debuglog:{init:function(){n(o).on("click","button.debugpress-action-debuglog-load",function(){n.ajax({url:debugpress_data.ajax_endpoint+"?action=debugpress_load_debuglog&_ajax_nonce="+debugpress_data.call_nonce,type:"get",dataType:"html",success:function(e){var s=n("#debugpress-debuglog-content").find("div");s.html(e),wp.dev4press.debugpress.tabs.debuglog.resize(),s.scrollTop(s.prop("scrollHeight"))},error:function(e,s,t){}})}),n(e).on("resize orientationchange",wp.dev4press.debugpress.tabs.debuglog.resize)},resize:function(){n("#debugpress-debuglog-content div").height(n(".debugpress-style-popup .sanp-content").height()-65)}},ajax:{init:function(){n(o).ajaxError(function(e,s,t,r){r={status:"error",error:r,url:t.url,type:t.type,headers:wp.dev4press.debugpress.tabs.ajax.headers(s)};wp.dev4press.debugpress.tabs.ajax.render(r)}),n(o).ajaxSuccess(function(e,s,t){t={status:"success",url:t.url,data:t.data?t.data.toString():"",type:t.type,response:t.hasOwnProperty("dataType")?t.dataType:t.dataTypes.join("/"),headers:wp.dev4press.debugpress.tabs.ajax.headers(s)};wp.dev4press.debugpress.tabs.ajax.render(t)})},render:function(e){var s=n("#debugpress-debugger-ajax-wrapper"),t=n("#debugpress-debugger-tab-ajax-li"),r=n(".debugpress-debug-dialog-button"),a=parseInt(s.data("calls")),o="",p="UNKNOWN";0===a&&s.html(""),s.data("calls",++a),n("a span",t).html(a),o="success"===e.status?(e.hasOwnProperty("response")&&(p=void 0===e.response?p:e.response.toString().toUpperCase()),'<h5 class="debugpress-debugger-panel-block-title">[SUCCESS] ['+e.type+" => "+p+"] "+e.url+'<span class="block-open"><i class="debugpress-icon debugpress-icon-minus"></i></span></h5>'):'<h5 class="debugpress-debugger-panel-block-title" style="background: #900;">[ERROR] ['+e.type+" => "+e.error+"] "+e.url+'<span class="block-open"><i class="debugpress-icon debugpress-icon-minus"></i></span></h5>',o+='<div class="debugpress-debugger-panel-block" style="display: block;"><table class="debugpress-debugger-table"><thead><tr><th scope="col" class="" style="">Name</th><th scope="col" class="" style="">Value</th></tr></thead><tbody>',n.each(e.headers,function(e,s){o+="<tr><td>"+e+"</td><td>"+s+"</td></tr>"}),o+="</tbody></table></div>",s.append(o),n(".debugpress-debug-has-ajax",r).show().html(a),r.fadeOut(50).fadeIn(50).fadeOut(100).fadeIn(100).fadeOut(50).fadeIn(50)},headers:function(e){var e=e.getAllResponseHeaders().trim().split(/[\r\n]+/),r={};return n.each(e,function(e,s){var s=s.split(": "),t=s.shift(),s=s.join(": ");"x-debugpress-"===t.substring(0,13).toLowerCase()&&(t=t.substring(13),r[t]=s)}),r}},hooks:{filters:{all:{types:[]},active:{show:"all",types:[]}},init:function(){this.prepare(),this.events()},prepare:function(){n("#debugpress-debugger-tab-hooks .sqlq-option-type").each(function(){var e=n(this).data("type");wp.dev4press.debugpress.tabs.hooks.filters.active.types.push(e),wp.dev4press.debugpress.tabs.hooks.filters.all.types.push(e)})},events:function(){n(o).on("click","#debugpress-debugger-tab-hooks .dbg-callback-button-expander",function(){var e=n(this).parent();n(this).next();e.hasClass("dbg-calls-show")?e.removeClass("dbg-calls-show"):e.addClass("dbg-calls-show")})}},queries:{filters:{total:{queries:0,total:0},all:{caller:[],types:[],tables:[]},active:{show:"all",caller:[],types:[],tables:[]}},init:function(){this.prepare(),this.events()},prepare:function(){var e=n("#debugpress-debugger-tab-queries .sqlq-option-caller"),s=n("#debugpress-debugger-tab-queries .sqlq-option-type"),t=n("#debugpress-debugger-tab-queries .sqlq-option-table");wp.dev4press.debugpress.tabs.queries.filters.total.queries=parseInt(n("#sqlq-stats-filter-queries").html()),wp.dev4press.debugpress.tabs.queries.filters.total.total=parseFloat(n("#sqlq-stats-filter-total").html()),e.each(function(){var e=parseInt(n(this).data("caller"));wp.dev4press.debugpress.tabs.queries.filters.active.caller.push(e),wp.dev4press.debugpress.tabs.queries.filters.all.caller.push(e)}),s.each(function(){var e=n(this).data("type");wp.dev4press.debugpress.tabs.queries.filters.active.types.push(e),wp.dev4press.debugpress.tabs.queries.filters.all.types.push(e)}),t.each(function(){var e=parseInt(n(this).data("table"));wp.dev4press.debugpress.tabs.queries.filters.active.tables.push(e),wp.dev4press.debugpress.tabs.queries.filters.all.tables.push(e)})},filter:function(){var e=n(".sql-query-list > .sql-query"),d={queries:0,total:0,min:!1,max:!1,avg:0},s={queries:0,total:0};e.each(function(){var e,s,t=n(this).data("caller"),r=(n(this).data("tables")+"").split(","),a=n(this).data("type"),o=n(this).data("speed"),p=parseFloat(n(this).data("time")),l=wp.dev4press.debugpress.tabs.queries.filters.active,i=!0;if(i=(i=(i="all"!==l.show&&l.show!==o?!1:i)&&-1===l.caller.indexOf(t)?!1:i)&&-1===l.types.indexOf(a)?!1:i){for(e=s=0;e<r.length;e++)-1<l.tables.indexOf(parseInt(r[e]))&&s++;0===s&&(i=!1)}i?(!1===d.min&&(d.min=p),!1===d.max&&(d.max=p),d.queries++,d.total+=p,d.min>p&&(d.min=p),d.max<p&&(d.max=p),n(this).show()):n(this).hide()}),0<d.queries?(d.avg=d.total/d.queries,s.queries=(d.queries/wp.dev4press.debugpress.tabs.queries.filters.total.queries*100).toFixed(0),s.total=(d.total/wp.dev4press.debugpress.tabs.queries.filters.total.total*100).toFixed(0)):(d.min=0,d.max=0),n.each(d,function(e,s){"queries"!==e&&(s=parseFloat(s).toFixed(6)),n("#sqlq-stats-filter-"+e).html(s)}),n.each(s,function(e,s){n("#sqlq-stats-ratio-"+e).html(s+"%")})},events:function(){n(o).on("click","#debugpress-debugger-tab-queries .sqlq-option-calls",function(e){var s;e.preventDefault(),n(this).hasClass("sqlq-option-off")&&(s="full"===(e=n(this).attr("id").substr(9))?"compact":"full",n(".sql-calls-"+e).show(),n(".sql-calls-"+s).hide(),n(".sqlq-option-calls").addClass("sqlq-option-off").removeClass("sqlq-option-on"),n(this).removeClass("sqlq-option-off").addClass("sqlq-option-on"))}),n(o).on("click","#debugpress-debugger-tab-queries .sqlq-option-sort",function(e){e.preventDefault(),n(this).hasClass("sqlq-option-off")?(wp.dev4press.debugpress.status.sql_sort=n(this).attr("id").substr(9),wp.dev4press.debugpress.sort_by(".sql-query-list","data-"+wp.dev4press.debugpress.status.sql_sort,wp.dev4press.debugpress.status.sql_order,"sql-query"),n(".sqlq-option-sort").addClass("sqlq-option-off").removeClass("sqlq-option-on"),n(this).removeClass("sqlq-option-off").addClass("sqlq-option-on")):(wp.dev4press.debugpress.status.sql_order="asc"===wp.dev4press.debugpress.status.sql_order?"desc":"asc",wp.dev4press.debugpress.sort_by(".sql-query-list","data-"+wp.dev4press.debugpress.status.sql_sort,wp.dev4press.debugpress.status.sql_order,"sql-query"))}),n(o).on("click","#debugpress-debugger-tab-queries .sqlq-option-show",function(e){e.preventDefault(),n(this).hasClass("sqlq-option-off")&&(wp.dev4press.debugpress.tabs.queries.filters.active.show=n(this).data("show"),n(".sqlq-option-show").addClass("sqlq-option-off").removeClass("sqlq-option-on"),n(this).removeClass("sqlq-option-off").addClass("sqlq-option-on"),wp.dev4press.debugpress.tabs.queries.filter())}),n(o).on("click","#debugpress-debugger-tab-queries .sqlq-option-reset",function(e){e.preventDefault(),"hide"===n(this).attr("id").substr(10)?(wp.dev4press.debugpress.tabs.queries.filters.active.tables=[],n(".sqlq-option-table").addClass("sqlq-option-off").removeClass("sqlq-option-on")):(wp.dev4press.debugpress.tabs.queries.filters.active.tables=wp.dev4press.debugpress.tabs.queries.filters.all.tables,n(".sqlq-option-table").addClass("sqlq-option-on").removeClass("sqlq-option-off")),n(".sqlq-option-reset").addClass("sqlq-option-off").removeClass("sqlq-option-on"),n(this).removeClass("sqlq-option-off").addClass("sqlq-option-on"),wp.dev4press.debugpress.tabs.queries.filter()}),n(o).on("click","#debugpress-debugger-tab-queries .sqlq-option-table",function(e){e.preventDefault();var s=n(this).data("table");n(this).hasClass("sqlq-option-off")?(wp.dev4press.debugpress.tabs.queries.filters.active.tables.push(s),n(this).addClass("sqlq-option-on").removeClass("sqlq-option-off")):(wp.dev4press.debugpress.tabs.queries.filters.active.tables=wp.dev4press.debugpress.tabs.queries.filters.active.tables.filter(function(e){return e!==s}),n(this).addClass("sqlq-option-off").removeClass("sqlq-option-on")),wp.dev4press.debugpress.tabs.queries.filter()}),n(o).on("click","#debugpress-debugger-tab-queries .sqlq-option-caller",function(e){e.preventDefault();var s=n(this).data("caller");n(this).hasClass("sqlq-option-off")?(wp.dev4press.debugpress.tabs.queries.filters.active.caller.push(s),n(this).addClass("sqlq-option-on").removeClass("sqlq-option-off")):(wp.dev4press.debugpress.tabs.queries.filters.active.caller=wp.dev4press.debugpress.tabs.queries.filters.active.caller.filter(function(e){return e!==s}),n(this).addClass("sqlq-option-off").removeClass("sqlq-option-on")),wp.dev4press.debugpress.tabs.queries.filter()}),n(o).on("click","#debugpress-debugger-tab-queries .sqlq-option-type",function(e){e.preventDefault();var s=n(this).data("type");n(this).hasClass("sqlq-option-off")?(wp.dev4press.debugpress.tabs.queries.filters.active.types.push(s),n(this).addClass("sqlq-option-on").removeClass("sqlq-option-off")):(wp.dev4press.debugpress.tabs.queries.filters.active.types=wp.dev4press.debugpress.tabs.queries.filters.active.types.filter(function(e){return e!==s}),n(this).addClass("sqlq-option-off").removeClass("sqlq-option-on")),wp.dev4press.debugpress.tabs.queries.filter()}),n(o).on("click","#debugpress-debugger-tab-queries .sqlq-caller-reset",function(e){e.preventDefault(),"hide"===n(this).attr("id").substr(11)?(wp.dev4press.debugpress.tabs.queries.filters.active.caller=[],n(".sqlq-option-caller").addClass("sqlq-option-off").removeClass("sqlq-option-on")):(wp.dev4press.debugpress.tabs.queries.filters.active.caller=wp.dev4press.debugpress.tabs.queries.filters.all.caller,n(".sqlq-option-caller").addClass("sqlq-option-on").removeClass("sqlq-option-off")),n(".sqlq-caller-reset").addClass("sqlq-option-off").removeClass("sqlq-option-on"),n(this).removeClass("sqlq-option-off").addClass("sqlq-option-on"),wp.dev4press.debugpress.tabs.queries.filter()}),n(o).on("click","#debugpress-debugger-tab-queries .sqlq-types-reset",function(e){e.preventDefault(),"hide"===n(this).attr("id").substr(10)?(wp.dev4press.debugpress.tabs.queries.filters.active.types=[],n(".sqlq-option-type").addClass("sqlq-option-off").removeClass("sqlq-option-on")):(wp.dev4press.debugpress.tabs.queries.filters.active.types=wp.dev4press.debugpress.tabs.queries.filters.all.types,n(".sqlq-option-type").addClass("sqlq-option-on").removeClass("sqlq-option-off")),n(".sqlq-types-reset").addClass("sqlq-option-off").removeClass("sqlq-option-on"),n(this).removeClass("sqlq-option-off").addClass("sqlq-option-on"),wp.dev4press.debugpress.tabs.queries.filter()}),n(o).on("click","#debugpress-debugger-tab-queries .sql-calls-button-expander",function(){var e=n(this).parent(),s=e.parent();e.hasClass("sql-calls-full")?(e.hide(),n(".sql-calls-compact",s).show()):(e.hide(),n(".sql-calls-full",s).show())})}}},tab_change:function(e){e!==wp.dev4press.debugpress.tab&&(wp.dev4press.debugpress.tab=e,n("#debugpress-debugger-tabs li").removeClass("debugpress-tab-active"),n("#"+e+"-li").addClass("debugpress-tab-active"),n("#debugpress-debugger-content-wrapper div.debugpress-tab-content").removeClass("debugpress-tab-active"),n("#"+e).addClass("debugpress-tab-active"),n("#debugpress-debugger-tabs li a").attr({tabindex:"-1","aria-selected":null}),n("#"+e+"-li a").attr({tabindex:"0","aria-selected":!0}),n("#debugpress-debugger-select").val(e))}}}(jQuery,window,document);