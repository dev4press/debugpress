!function(n,s,o){s.wp=s.wp||{},s.wp.dev4press=s.wp.dev4press||{},s.wp.dev4press.debugpress={ajax:!1,tab:"",status:{sql_sort:"order",sql_order:"asc"},counts:{total:0,errors:0,doingitwrong:0,deprecated:0},sort_by:function(t,s,e,r){var a,o,l=[],p=[],i=[];for(a in n(t+" div."+r).each(function(){o=n(this).attr(s),l[o]=this,i.push(o)}),"asc"===e?i.sort(function(s,e){return s-e}):i.sort(function(s,e){return e-s}),i)p.push(l[i[a]]);n(t).empty(),n.each(p,function(s,e){n(t).append(e)})},init:function(s,e){wp.dev4press.debugpress.counts=s,wp.dev4press.debugpress.ajax=e,0<wp.dev4press.debugpress.counts.total&&(s=n(".debugpress-debug-dialog-button"),e=0<wp.dev4press.debugpress.counts.errors?"debugpress-debug-has-errors":"debugpress-debug-has-warnings",n(".debugpress-debug-has-errors",s).show().html(wp.dev4press.debugpress.counts.total),s.addClass(e)),n("#debugpress-debugger-content-wrapper").smartAniPopup({settings:{style:"debugpress-style-popup",modal:!0,effect:"fade",closeEscape:!0,onLoad:!1,width:"95%",height:"90%",headerContent:n("#debugpress-debugger-content-header"),footerContent:n("#debugpress-debugger-content-footer"),buttonXContent:'<i aria-hidden="true" class="debugpress-icon debugpress-icon-power-off"></i>',xContentSize:!0},callbacks:{afterOpen:function(){n("#debugpress-debugger-tabs .debugpress-tab-active a").trigger("focus")}}}),n(o).on("click",".debugpress-debug-dialog-button a",function(s){s.preventDefault(),n("#debugpress-debugger-content-wrapper").smartAniPopup("open")}),n(o).on("change","#debugpress-debugger-select",function(){wp.dev4press.debugpress.tab_change(n(this).val())}),n(o).on("click",".debugpress-querie-sidebar-control span",function(s){s.preventDefault();s=n(".debugpress-tab-content.debugpress-tab-active");"open"===n(this).data("state")?(s.addClass("debugpress-queries-sidebar-closed"),n(this).data("state","closed"),n("i",this).removeClass("debugpress-icon-flip-horizontal")):(s.removeClass("debugpress-queries-sidebar-closed"),n(this).data("state","open"),n("i",this).addClass("debugpress-icon-flip-horizontal"))}),n(o).on("click",".debugpress-debugger-panel-block-title span",function(s){s.preventDefault();s=n(this).parent().next();n(this).hasClass("block-open")?(n(this).removeClass("block-open"),n(this).find("i").attr("class","debugpress-icon debugpress-icon-plus"),s.hide()):(n(this).addClass("block-open"),n(this).find("i").attr("class","debugpress-icon debugpress-icon-minus"),s.show())}),n(o).on("click","#debugpress-debugger-content-wrapper .debugpress-events-log-toggle",function(s){s.preventDefault(),n(this).hasClass("debugpress-events-log-toggle-opened")?(n(this).html(debugpress_data.events_show_details),n(this).removeClass("debugpress-events-log-toggle-opened"),n(this).next().removeClass("debugpress-events-log-toggler-opened")):(n(this).html(debugpress_data.events_hide_details),n(this).addClass("debugpress-events-log-toggle-opened"),n(this).next().addClass("debugpress-events-log-toggler-opened"))}),n(o).on("keydown",'#debugpress-debugger-tabs [role="tab"]',function(s){var e,t=n(this),r=n(this).parents("li").prev().children('[role="tab"]'),a=n(this).parents("li").next().children('[role="tab"]');switch(s.keyCode){case 37:e=r;break;case 39:e=a;break;default:e=!1}e.length&&(t.attr({tabindex:"-1","aria-selected":null}),e.attr({tabindex:"0","aria-selected":!0}).trigger("focus"),s=n(o.activeElement).attr("href").substring(1),n('#debugpress-debugger-content-wrapper [role="tabpanel"]').attr("aria-hidden","true"),n("#debugpress-debugger-content-wrapper #"+s).attr("aria-hidden",null),wp.dev4press.debugpress.tab_change(s))}),n(o).on("click",".debugpress_r a.debugpress_r_c",function(s){var e;s.preventDefault(),n(this).hasClass("debugpress_r_aa")&&(s=n(this).find(".debugpress_r_a"),(e=n("#"+n(this).data("branch")))&&(e.hasClass("debugpress_r_open")?s.html(debugpress_data.icon_right):s.html(debugpress_data.icon_down),e.toggleClass("debugpress_r_open")))}),n(o).on("click","#debugpress-debugger-tabs li a",function(s){s.preventDefault(),wp.dev4press.debugpress.tab_change(n(this).attr("href").substr(1))}),wp.dev4press.debugpress.ajax&&wp.dev4press.debugpress.tabs.ajax.init(),wp.dev4press.debugpress.tabs.debuglog.init(),wp.dev4press.debugpress.tabs.queries.init()},tabs:{debuglog:{init:function(){n(o).on("click","button.debugpress-action-debuglog-load",function(){n.ajax({url:debugpress_data.ajax_endpoint+"?action=debugpress_load_debuglog&_ajax_nonce="+debugpress_data.call_nonce,type:"get",dataType:"html",success:function(s){var e=n("#debugpress-debuglog-content").find("div");e.html(s),wp.dev4press.debugpress.tabs.debuglog.resize(),e.scrollTop(e.prop("scrollHeight"))},error:function(s,e,t){}})}),n(s).on("resize orientationchange",wp.dev4press.debugpress.tabs.debuglog.resize)},resize:function(){n("#debugpress-debuglog-content div").height(n(".debugpress-style-popup .sanp-content").height()-65)}},ajax:{init:function(){n(o).ajaxError(function(s,e,t,r){r={status:"error",error:r,url:t.url,type:t.type,headers:wp.dev4press.debugpress.tabs.ajax.headers(e)};wp.dev4press.debugpress.tabs.ajax.render(r)}),n(o).ajaxSuccess(function(s,e,t){t={status:"success",url:t.url,data:t.data?t.data.toString():"",type:t.type,response:t.hasOwnProperty("dataType")?t.dataType:t.dataTypes.join("/"),headers:wp.dev4press.debugpress.tabs.ajax.headers(e)};wp.dev4press.debugpress.tabs.ajax.render(t)})},render:function(s){var e=n("#debugpress-debugger-ajax-wrapper"),t=n("#debugpress-debugger-tab-ajax-li"),r=n(".debugpress-debug-dialog-button"),a=parseInt(e.data("calls")),o="",l="UNKNOWN";0===a&&e.html(""),e.data("calls",++a),n("a span",t).html(a),o="success"===s.status?(s.hasOwnProperty("response")&&(l=void 0===s.response?l:s.response.toString().toUpperCase()),'<h5 class="debugpress-debugger-panel-block-title">[SUCCESS] ['+s.type+" => "+l+"] "+s.url+'<span class="block-open"><i class="debugpress-icon debugpress-icon-minus"></i></span></h5>'):'<h5 class="debugpress-debugger-panel-block-title" style="background: #900;">[ERROR] ['+s.type+" => "+s.error+"] "+s.url+'<span class="block-open"><i class="debugpress-icon debugpress-icon-minus"></i></span></h5>',o+='<div class="debugpress-debugger-panel-block" style="display: block;"><table class="debugpress-debugger-table"><thead><tr><th scope="col" class="" style="">Name</th><th scope="col" class="" style="">Value</th></tr></thead><tbody>',n.each(s.headers,function(s,e){o+="<tr><td>"+s+"</td><td>"+e+"</td></tr>"}),o+="</tbody></table></div>",e.append(o),n(".debugpress-debug-has-ajax",r).show().html(a),r.fadeOut(50).fadeIn(50).fadeOut(100).fadeIn(100).fadeOut(50).fadeIn(50)},headers:function(s){var s=s.getAllResponseHeaders().trim().split(/[\r\n]+/),r={};return n.each(s,function(s,e){var e=e.split(": "),t=e.shift(),e=e.join(": ");"x-debugpress-"===t.substring(0,13).toLowerCase()&&(t=t.substring(13),r[t]=e)}),r}},queries:{filters:{total:{queries:0,total:0},all:{caller:[],types:[],tables:[]},active:{show:"all",caller:[],types:[],tables:[]}},init:function(){this.prepare(),this.events()},prepare:function(){var s=n(".sqlq-option-caller"),e=n(".sqlq-option-type"),t=n(".sqlq-option-table");wp.dev4press.debugpress.tabs.queries.filters.total.queries=parseInt(n("#sqlq-stats-filter-queries").html()),wp.dev4press.debugpress.tabs.queries.filters.total.total=parseFloat(n("#sqlq-stats-filter-total").html()),s.each(function(){var s=parseInt(n(this).data("caller"));wp.dev4press.debugpress.tabs.queries.filters.active.caller.push(s),wp.dev4press.debugpress.tabs.queries.filters.all.caller.push(s)}),e.each(function(){wp.dev4press.debugpress.tabs.queries.filters.active.types.push(n(this).data("type")),wp.dev4press.debugpress.tabs.queries.filters.all.types.push(n(this).data("type"))}),t.each(function(){var s=parseInt(n(this).data("table"));wp.dev4press.debugpress.tabs.queries.filters.active.tables.push(s),wp.dev4press.debugpress.tabs.queries.filters.all.tables.push(s)})},filter:function(){var s=n(".sql-query-list > .sql-query"),d={queries:0,total:0,min:!1,max:!1,avg:0},e={queries:0,total:0};s.each(function(){var s,e,t=n(this).data("caller"),r=(n(this).data("tables")+"").split(","),a=n(this).data("type"),o=n(this).data("speed"),l=parseFloat(n(this).data("time")),p=wp.dev4press.debugpress.tabs.queries.filters.active,i=!0;if(i=(i=(i="all"!==p.show&&p.show!==o?!1:i)&&-1===p.caller.indexOf(t)?!1:i)&&-1===p.types.indexOf(a)?!1:i){for(s=e=0;s<r.length;s++)-1<p.tables.indexOf(parseInt(r[s]))&&e++;0===e&&(i=!1)}i?(!1===d.min&&(d.min=l),!1===d.max&&(d.max=l),d.queries++,d.total+=l,d.min>l&&(d.min=l),d.max<l&&(d.max=l),n(this).show()):n(this).hide()}),0<d.queries?(d.avg=d.total/d.queries,e.queries=(d.queries/wp.dev4press.debugpress.tabs.queries.filters.total.queries*100).toFixed(0),e.total=(d.total/wp.dev4press.debugpress.tabs.queries.filters.total.total*100).toFixed(0)):(d.min=0,d.max=0),n.each(d,function(s,e){"queries"!==s&&(e=parseFloat(e).toFixed(6)),n("#sqlq-stats-filter-"+s).html(e)}),n.each(e,function(s,e){n("#sqlq-stats-ratio-"+s).html(e+"%")})},events:function(){n(o).on("click",".sqlq-option-calls",function(s){var e;s.preventDefault(),n(this).hasClass("sqlq-option-off")&&(e="full"===(s=n(this).attr("id").substr(9))?"compact":"full",n(".sql-calls-"+s).show(),n(".sql-calls-"+e).hide(),n(".sqlq-option-calls").addClass("sqlq-option-off").removeClass("sqlq-option-on"),n(this).removeClass("sqlq-option-off").addClass("sqlq-option-on"))}),n(o).on("click",".sqlq-option-sort",function(s){s.preventDefault(),n(this).hasClass("sqlq-option-off")?(wp.dev4press.debugpress.status.sql_sort=n(this).attr("id").substr(9),wp.dev4press.debugpress.sort_by(".sql-query-list","data-"+wp.dev4press.debugpress.status.sql_sort,wp.dev4press.debugpress.status.sql_order,"sql-query"),n(".sqlq-option-sort").addClass("sqlq-option-off").removeClass("sqlq-option-on"),n(this).removeClass("sqlq-option-off").addClass("sqlq-option-on")):(wp.dev4press.debugpress.status.sql_order="asc"===wp.dev4press.debugpress.status.sql_order?"desc":"asc",wp.dev4press.debugpress.sort_by(".sql-query-list","data-"+wp.dev4press.debugpress.status.sql_sort,wp.dev4press.debugpress.status.sql_order,"sql-query"))}),n(o).on("click",".sqlq-option-show",function(s){s.preventDefault(),n(this).hasClass("sqlq-option-off")&&(wp.dev4press.debugpress.tabs.queries.filters.active.show=n(this).data("show"),n(".sqlq-option-show").addClass("sqlq-option-off").removeClass("sqlq-option-on"),n(this).removeClass("sqlq-option-off").addClass("sqlq-option-on"),wp.dev4press.debugpress.tabs.queries.filter())}),n(o).on("click",".sqlq-option-reset",function(s){s.preventDefault(),"hide"===n(this).attr("id").substr(10)?(wp.dev4press.debugpress.tabs.queries.filters.active.tables=[],n(".sqlq-option-table").addClass("sqlq-option-off").removeClass("sqlq-option-on")):(wp.dev4press.debugpress.tabs.queries.filters.active.tables=wp.dev4press.debugpress.tabs.queries.filters.all.tables,n(".sqlq-option-table").addClass("sqlq-option-on").removeClass("sqlq-option-off")),n(".sqlq-option-reset").addClass("sqlq-option-off").removeClass("sqlq-option-on"),n(this).removeClass("sqlq-option-off").addClass("sqlq-option-on"),wp.dev4press.debugpress.tabs.queries.filter()}),n(o).on("click",".sqlq-option-table",function(s){s.preventDefault();var e=n(this).data("table");n(this).hasClass("sqlq-option-off")?(wp.dev4press.debugpress.tabs.queries.filters.active.tables.push(e),n(this).addClass("sqlq-option-on").removeClass("sqlq-option-off")):(wp.dev4press.debugpress.tabs.queries.filters.active.tables=wp.dev4press.debugpress.tabs.queries.filters.active.tables.filter(function(s){return s!==e}),n(this).addClass("sqlq-option-off").removeClass("sqlq-option-on")),wp.dev4press.debugpress.tabs.queries.filter()}),n(o).on("click",".sqlq-option-caller",function(s){s.preventDefault();var e=n(this).data("caller");n(this).hasClass("sqlq-option-off")?(wp.dev4press.debugpress.tabs.queries.filters.active.caller.push(e),n(this).addClass("sqlq-option-on").removeClass("sqlq-option-off")):(wp.dev4press.debugpress.tabs.queries.filters.active.caller=wp.dev4press.debugpress.tabs.queries.filters.active.caller.filter(function(s){return s!==e}),n(this).addClass("sqlq-option-off").removeClass("sqlq-option-on")),wp.dev4press.debugpress.tabs.queries.filter()}),n(o).on("click",".sqlq-option-type",function(s){s.preventDefault();var e=n(this).data("type");n(this).hasClass("sqlq-option-off")?(wp.dev4press.debugpress.tabs.queries.filters.active.types.push(e),n(this).addClass("sqlq-option-on").removeClass("sqlq-option-off")):(wp.dev4press.debugpress.tabs.queries.filters.active.types=wp.dev4press.debugpress.tabs.queries.filters.active.types.filter(function(s){return s!==e}),n(this).addClass("sqlq-option-off").removeClass("sqlq-option-on")),wp.dev4press.debugpress.tabs.queries.filter()}),n(o).on("click",".sqlq-caller-reset",function(s){s.preventDefault(),"hide"===n(this).attr("id").substr(11)?(wp.dev4press.debugpress.tabs.queries.filters.active.caller=[],n(".sqlq-option-caller").addClass("sqlq-option-off").removeClass("sqlq-option-on")):(wp.dev4press.debugpress.tabs.queries.filters.active.caller=wp.dev4press.debugpress.tabs.queries.filters.all.caller,n(".sqlq-option-caller").addClass("sqlq-option-on").removeClass("sqlq-option-off")),n(".sqlq-caller-reset").addClass("sqlq-option-off").removeClass("sqlq-option-on"),n(this).removeClass("sqlq-option-off").addClass("sqlq-option-on"),wp.dev4press.debugpress.tabs.queries.filter()}),n(o).on("click",".sqlq-types-reset",function(s){s.preventDefault(),"hide"===n(this).attr("id").substr(10)?(wp.dev4press.debugpress.tabs.queries.filters.active.types=[],n(".sqlq-option-type").addClass("sqlq-option-off").removeClass("sqlq-option-on")):(wp.dev4press.debugpress.tabs.queries.filters.active.types=wp.dev4press.debugpress.tabs.queries.filters.all.types,n(".sqlq-option-type").addClass("sqlq-option-on").removeClass("sqlq-option-off")),n(".sqlq-types-reset").addClass("sqlq-option-off").removeClass("sqlq-option-on"),n(this).removeClass("sqlq-option-off").addClass("sqlq-option-on"),wp.dev4press.debugpress.tabs.queries.filter()}),n(o).on("click",".sql-calls-button-expander",function(){var s=n(this).parent(),e=s.parent();s.hasClass("sql-calls-full")?(s.hide(),n(".sql-calls-compact",e).show()):(s.hide(),n(".sql-calls-full",e).show())})}}},tab_change:function(s){s!==wp.dev4press.debugpress.tab&&(wp.dev4press.debugpress.tab=s,n("#debugpress-debugger-tabs li").removeClass("debugpress-tab-active"),n("#"+s+"-li").addClass("debugpress-tab-active"),n("#debugpress-debugger-content-wrapper div.debugpress-tab-content").removeClass("debugpress-tab-active"),n("#"+s).addClass("debugpress-tab-active"),n("#debugpress-debugger-tabs li a").attr({tabindex:"-1","aria-selected":null}),n("#"+s+"-li a").attr({tabindex:"0","aria-selected":!0}),n("#debugpress-debugger-select").val(s))}}}(jQuery,window,document);